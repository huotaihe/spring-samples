<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<!--<include resource="org/springframework/boot/logging/logback/base.xml" />-->

	<!-- 读取 spring.application.name 属性来生成日志文件名
	scope：作用域
	name：在 logback-spring.xml 使用的键
	source：application.properties 文件中的键
	defaultValue：默认值
 -->
	<springProperty scope="context" name="logName" source="spring.application.name" defaultValue="myapp.log"/>
	<springProperty scope="context" name="logPath" source="logging.path" />

	<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>${logPath}}/${logName}.log</file>
	</appender>

	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<target>System.out</target>
		<encoder charset="UTF-8">
			<pattern>%d [%thread] %-5p [%c] [%F:%L] [trace=%X{X-Trace-Id:-},span=%X{X-Span-Id:-},parent=%X{X-Parent-Id:-},name=%X{X-Span-Name:-},app=%X{appname:-},begintime=%X{begintime:-},endtime=%X{fin-X1-time:-}] - %msg%n</pattern>
		</encoder>
	</appender>


	<logger name="sample.logback" level="DEBUG" />
	<springProfile name="dev">
		<root level="DEBUG">
			<appender-ref ref="STDOUT"/>
		</root>
	</springProfile>
	<springProfile name="stg">
		<root level="INFO">
			<appender-ref ref="FILE"/>
			<appender-ref ref="STDOUT"/>
		</root>
	</springProfile>
</configuration>
